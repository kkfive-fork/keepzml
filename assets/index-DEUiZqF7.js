import{c as w,r as u,j as s}from"./index-B75hTygv.js";async function z(e){return await new Promise(y=>setTimeout(y,1e3)),e}const E="_form_1hxjz_14",R="_form_item_1hxjz_14",T="_label_1hxjz_18",v="_primary_1hxjz_33",A={form:E,form_item:R,label:T,primary:v};function P(){const e=w.c(16),[y,d]=u.useTransition();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[j,b]=u.useState(r);let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=(t,o)=>[...t,{text:o,sending:!0}],e[1]=c):c=e[1];const[p,g]=u.useOptimistic(j,c),l=u.useRef(null);let m;e[2]!==g||e[3]!==d?(m=async function(o){const x=o.get("message");l.current.reset(),g(x),d(async()=>{const S=await z(x);b(M=>[...M,{text:S}])})},e[2]=g,e[3]=d,e[4]=m):m=e[4];const h=m;let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("input",{type:"text",name:"message",placeholder:"Hello!"}),e[5]=a):a=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("button",{type:"submit",style:{marginLeft:"10px"},children:"Send"}),e[6]=f):f=e[6];let n;e[7]!==h||e[8]!==l?(n=s.jsxs("form",{id:A.form,action:h,ref:l,children:[a,f]}),e[7]=h,e[8]=l,e[9]=n):n=e[9];let i;if(e[10]!==p){let t;e[12]===Symbol.for("react.memo_cache_sentinel")?(t=(o,x)=>s.jsxs("div",{children:[o.text,!!o.sending&&s.jsx("small",{children:" (Sending...)"})]},x),e[12]=t):t=e[12],i=p.map(t),e[10]=p,e[11]=i}else i=e[11];let _;return e[13]!==n||e[14]!==i?(_=s.jsxs(s.Fragment,{children:[n,i]}),e[13]=n,e[14]=i,e[15]=_):_=e[15],_}export{P as default};
