import{c as d,j as i,r}from"./index-B75hTygv.js";const h=async()=>(await fetch("https://api.chucknorris.io/jokes/random")).json();function f(s){const e=d.c(8);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=h(),e[0]=o):o=e[0];const n=o;let t;e[1]===Symbol.for("react.memo_cache_sentinel")?(t=i.jsx("div",{id:"tips",children:"多个 Suspense 嵌套，子组件第一部分"}),e[1]=t):t=e[1];let a;e[2]!==s.value?(a=i.jsxs("div",{className:"_05_dou1_message",children:["父级消息: ",s.value]}),e[2]=s.value,e[3]=a):a=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx("div",{children:"Loading..."}),e[4]=l):l=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(r.Suspense,{fallback:l,children:i.jsx(j,{api:n})}),e[5]=c):c=e[5];let u;return e[6]!==a?(u=i.jsxs("div",{children:[t,i.jsxs("div",{className:"content",children:[a,c]})]}),e[6]=a,e[7]=u):u=e[7],u}const j=s=>{const e=d.c(2),{api:o}=s,n=o?r.use(o):{value:"nothing"};let t;return e[0]!==n.value?(t=i.jsxs("div",{className:"_03_a_value_update",children:["子级消息：",n.value]}),e[0]=n.value,e[1]=t):t=e[1],t},m=async()=>(await fetch("https://api.chucknorris.io/jokes/random")).json();var _=["首页","视频","探索"];function x(){const[s,e]=r.useState(m),[o,n]=r.useState(0),[t,a]=r.useTransition();var l=c=>{n(c),e(m())};return i.jsxs("div",{children:[i.jsx("div",{id:"tips",children:"多个 Suspense 嵌套，子组件第二部分"}),i.jsxs("div",{className:"content",children:[_.map((c,u)=>i.jsx("button",{id:"btn_05_item",className:o===u?"active":"",onClick:()=>l(u),disabled:t,children:c},c)),i.jsx(r.Suspense,{fallback:i.jsx("div",{className:"_05_a_value_item",children:"Loading..."}),children:i.jsx(p,{api:s,pending:t})})]})]})}const p=s=>{const e=d.c(5),{api:o,pending:n}=s,t=o?r.use(o):{value:"nothing"},a=n?.6:1;let l;e[0]!==a?(l={opacity:a},e[0]=a,e[1]=l):l=e[1];let c;return e[2]!==l||e[3]!==t.value?(c=i.jsx("div",{className:"_05_a_value_item",style:l,children:t.value}),e[2]=l,e[3]=t.value,e[4]=c):c=e[4],c},v=async()=>(await fetch("https://api.chucknorris.io/jokes/random")).json();function S(){const s=d.c(5),[e,o]=r.useState(v);let n;s[0]===Symbol.for("react.memo_cache_sentinel")?(n=function(){o(v())},s[0]=n):n=s[0];const t=n;let a,l;s[1]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("div",{id:"tips",children:"更新父级状态1"}),l=i.jsx("button",{onClick:t,children:"更新父级消息"}),s[1]=a,s[2]=l):(a=s[1],l=s[2]);let c;return s[3]!==e?(c=i.jsxs("div",{children:[a,l,i.jsx(g,{messagePromise:e})]}),s[3]=e,s[4]=c):c=s[4],c}function g(s){const e=d.c(3),{messagePromise:o}=s;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx("p",{children:"fetch message... ..."}),e[0]=n):n=e[0];let t;return e[1]!==o?(t=i.jsx(r.Suspense,{fallback:n,children:i.jsx(b,{messagePromise:o})}),e[1]=o,e[2]=t):t=e[2],t}const b=s=>{const e=d.c(10),{messagePromise:o}=s,n=r.use(o);let t;e[0]!==n.value?(t=i.jsx("p",{children:n.value}),e[0]=n.value,e[1]=t):t=e[1];let a;e[2]!==n.value?(a=i.jsx(f,{value:n.value}),e[2]=n.value,e[3]=a):a=e[3];let l;e[4]!==n.value?(l=i.jsx(x,{value:n.value}),e[4]=n.value,e[5]=l):l=e[5];let c;return e[6]!==t||e[7]!==a||e[8]!==l?(c=i.jsxs("div",{children:[t,a,l]}),e[6]=t,e[7]=a,e[8]=l,e[9]=c):c=e[9],c};new Promise(s=>{s({value:29})});export{S as default};
